{{- if .Values.miner.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "geth.fullname" . }}-miner
  labels:
    {{- include "geth.labels" . | nindent 4 }}
    component: "miner"
type: Opaque
data:
{{- range $index, $account := .Values.miner.accounts }}
  {{ include "geth.fullname" $ }}-miner-{{ $index }}: {{ $account.privateKey | b64enc | quote }}
  {{ include "geth.fullname" $ }}-miner-{{ $index }}-pass: {{ $account.password | b64enc | quote }}
{{- end }}
{{- end }}
