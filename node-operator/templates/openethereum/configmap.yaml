{{- if .Values.openethereum.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "node-operator.fullname" . }}-openethereum
  labels:
    {{- include "node-operator.labels" . | nindent 4 }}
    {{- include "openethereum.labels" . | nindent 4 }}
data:
  entrypoint.sh: |
    #!/bin/sh
    EXT_IP=$(nslookup myip.opendns.com resolver1.opendns.com| awk '/^Address: / { print $2 }')
    /home/openethereum/openethereum --nat "extip:$EXT_IP" $@
{{- end }}
